(function(){var g,f,e,d,a;var b=Object.prototype.hasOwnProperty,c=function(k,i){for(var h in i){if(b.call(i,h)){k[h]=i[h]}}function j(){this.constructor=k}j.prototype=i.prototype;k.prototype=new j;k.__super__=i.prototype;return k};a=(function(){function h(i,j){if(i==null){i=0}if(j==null){j=0}this.set(i,j)}h.prototype.set=function(i,j){if(i==null){i=0}if(j==null){j=0}this.x=i;this.y=j;return this};h.prototype.add=function(i){this.x+=i.x;this.y+=i.y;return this};h.prototype.sub=function(i){this.x-=i.x;this.y-=i.y;return this};h.prototype.scale=function(i){this.x*=i;this.y*=i;return this};h.prototype.div=function(i){this.x/=i;this.y/=i;return this};h.prototype.product=function(i){return this.x*i.x+this.y*i.y};h.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};h.prototype.truncate=function(i){if(this.length()){this.scale(i/this.length())}return this};h.prototype.normalize=function(){return this.truncate(1)};h.prototype.angle=function(){return(180*Math.atan2(this.y,this.x))/Math.PI};h.prototype.rotate=function(k){var i,j;i=(k*Math.PI)/180;j=this.length();this.x=Math.sin(i)*this.y+Math.cos(i)*this.x;this.y=Math.cos(i)*this.y-Math.sin(i)*this.x;return this.truncate(j)};h.prototype.clone=function(){return new h(this.x,this.y)};h.prototype.reverse=function(){this.x*=-1;this.y*=-1;return this};return h})();Array.prototype._index=function(h){var i;if(h<0){i=this.length;return i+h}return h};Array.prototype.at=function(h){return this[this._index(h)]};Array.prototype.map=function(h){var j,i;return([].splice.apply(this,[0,this.length-0].concat(i=(function(){var m,l,k;k=[];for(m=0,l=this.length;m<l;m++){j=this[m];k.push(h(j))}return k}).call(this))),i)};Array.prototype.clone=function(){return this.dup()};Array.prototype.dup=function(){return this.slice(0,this.length)};Array.prototype.each=function(i){var h,j;for(h=0,j=this.length;0<=j?h<j:h>j;0<=j?h++:h--){i(this[h],h)}return this};Array.prototype.deleteAt=function(h){h=this._index(h);if(h>=this.length){return}return this.splice(h,1)};Array.prototype.deleteIf=function(j){var h;return this.replace((function(){var k,i;i=[];for(h=0,k=this.length;0<=k?h<k:h>k;0<=k?h++:h--){if(!j(this[h],h)){i.push(this[h])}}return i}).call(this))};Array.prototype.reject=function(h){var i;i=this.length;this.deleteIf(h);if(i===this.length){return}return this};Array.prototype.isEmpty=function(){return this.length===0};Array.prototype.isEql=function(h,k){var i,j;if(k==null){k=function(m,l){return m===l}}if(this.length!==h.length){return false}for(i=0,j=this.length;0<=j?i<j:i>j;0<=j?i++:i--){if(!k(this[i],h[i])){return false}}return true};Array.prototype.fill=function(l,m,h){var j,k;if(m==null){m=0}if(h==null){h=this.length-1}m=this._index(m);h=this._index(h);[].splice.apply(this,[m,h-m+1].concat(k=(function(){var i;i=[];for(j=m;m<=h?j<=h:j>=h;m<=h?j++:j--){i.push(l)}return i})())),k;return this};Array.prototype.first=function(){return this[0]};Array.prototype.last=function(){var h;h=this._index(-1);return this[h]};Array.prototype.uniq=function(l){var k,j,i,h;if(l==null){l=function(n,m){return n===m}}k=[];for(i=0,h=this.length;i<h;i++){j=this[i];if(!k.isInclude(j,l)){k.push(j)}}return this.replace(k)};Array.prototype.index=function(j,k){var h,i;if(k==null){k=function(m,l){return m===l}}for(h=0,i=this.length;0<=i?h<i:h>i;0<=i?h++:h--){if(k(this[h],j)){return h}}return};Array.prototype.indexes=function(){var j,k,i,h;h=[];for(k=0,i=arguments.length;k<i;k++){j=arguments[k];h.push(this.at(j))}return h};Array.prototype.rindex=function(j,k){var h,i;if(k==null){k=function(m,l){return m===l}}for(h=i=this.length;i<=0?h<0:h>0;i<=0?h++:h--){if(k(this[h],j)){return h}}return};Array.prototype.flatten=function(){return this.replace(this.reduce(function(i,h){return i.concat(h instanceof Array?h.flatten():h)},[]))};Array.prototype.transpose=function(){var n,m,l,k,j,o;k=this.isEmpty()?0:this.length;n=this.first() instanceof Array?this.first().length:0;if(!k||!n){return this}l=(function(){var h;h=[];for(m=0;0<=n?m<n:m>n;0<=n?m++:m--){h.push([])}return h})();for(j=0;0<=k?j<k:j>k;0<=k?j++:j--){for(o=0;0<=n?o<n:o>n;0<=n?o++:o--){l[o][j]=this[j][o]}}return this.replace(l)};Array.prototype.compact=function(){return this.deleteIf(function(h){return h===void 0})};Array.prototype.isInclude=function(k,l){var i,j,h;if(l==null){l=function(n,m){return n===m}}for(j=0,h=this.length;j<h;j++){i=this[j];if(l(i,k)){return true}}return false};Array.prototype.size=function(){return this.length};Array.prototype.swap=function(i,h){var j;i=this._index(i);h=this._index(h);j=this[i];this[i]=this[h];this[h]=j;return this};Array.prototype.shuffle=function(){var h,j;for(h=0,j=this.length;0<=j?h<j:h>j;0<=j?h++:h--){this.swap(h,Math.floor(Math.random()*this.length))}return this};Array.prototype.choice=function(){return this[Math.floor(Math.random()*this.length)]};Array.prototype.count=function(k,l){var h,i,j;if(l==null){l=function(n,m){return n===m}}i=0;for(h=0,j=this.length;0<=j?h<j:h>j;0<=j?h++:h--){if(l(this[h],k)){++i}}return i};Array.prototype.replace=function(h){var j,k,i;this.clear();for(k=0,i=h.length;k<i;k++){j=h[k];this.push(j)}return this};Array.prototype.nitems=function(){return this.clone().compact().size()};Array.prototype.insert=function(){var k,l,j,h,m;k=Array.prototype.slice.call(arguments,0,arguments.length);if(k.size()<=1){return this}j=this._index(k[0]);h=k.slice(1,this.length);for(l=0,m=h.length;0<=m?l<m:l>m;0<=m?l++:l--){this.splice(j+l,0,h[l])}return this};Array.prototype.clear=function(){var h;h=[];while(!this.isEmpty()){h.push(this.deleteAt(0))}return h};Array.prototype.max=function(i){var h;if(i==null){i=function(k,j){if(k===j){return 0}if(k<j){return -1}else{return 1}}}h=this.first();this.reduce(function(k,j){if(i(h,j)<0){return h=j}});return h};Array.prototype.min=function(i){var h;if(i==null){i=function(k,j){if(k===j){return 0}if(k<j){return -1}else{return 1}}}h=this.first();this.reduce(function(k,j){if(i(h,j)>=0){return h=j}});return h};d=(function(){function h(i,k,m,l,j){if(k==null){k=false}if(m==null){m=0}if(l==null){l=false}if(j==null){j=void 0}this.set(i);this._time=m;this._active=l;this._complete=j;this._repeat=k}h.prototype.set=function(i){if(i==null){i=0}this._max=i;return this};h.prototype.play=function(){this._active=true;return this};h.prototype.stop=function(){this._active=false;this._time=0;return this};h.prototype.pause=function(){this._active=false;return this};h.prototype.tick=function(){if(this._time<this._max&&this._active){++this._time;if(this._time===this._max){if(typeof complete==="undefined"||complete===null){this._complete()}if(this._repeat){this._time=0}}}return this};h.prototype.now=function(){return time};h.prototype.setComplete=function(i){var j;this._complete=(j=typeof i===Function)!=null?j:{func:void 0};return this};h.prototype.setRepeat=function(i){this._repeat=i;return this};return h})();enchant();f=(function(){h.prototype.config={WIDTH:320,HEIGHT:320,FPS:30,IMAGE_PATH:"resources/images/",IMAGES:["miku.gif"],SOUND_PATH:"resources/sounds/",SOUNDS:[]};function h(){var l,k,i,j;this.game=new Game(this.config.WIDTH,this.config.HEIGHT);this.game.fps=this.config.FPS;j=this.config.IMAGES;for(k=0,i=j.length;k<i;k++){l=j[k];this.game.preload(""+this.config.IMAGE_PATH+l)}this.game.onload=function(){var m;m=new e(138,288);return this.rootScene.addChild(m)};this.game.start();h.game=this.game;h.config=this.config}return h})();window.onload=function(){return new f()};g=(function(){c(h,Sprite);function h(j,k,i,l){if(i==null){i=0}if(l==null){l=0}h.__super__.constructor.call(this,j,k);this.addEventListener("enterframe",this.update);this.x=i;this.y=l;this.v=new a()}h.prototype.update=function(i){this.x+=this.v.x;return this.y+=this.v.y};h.prototype.setImage=function(i){return this.image=f.game.assets[""+f.config.IMAGE_PATH+i]};return h})();e=(function(){c(h,g);function h(i,j){if(i==null){i=0}if(j==null){j=0}h.__super__.constructor.call(this,42,32,i,j);this.setImage("miku.gif");this.speed=7}h.prototype.update=function(i){this.v.set(0,0);if(f.game.input.left){this.v.x=-1}else{if(f.game.input.right){this.v.x=1}}if(f.game.input.up){this.v.y=-1}else{if(f.game.input.down){this.v.y=1}}this.v.truncate(this.speed);h.__super__.update.apply(this,arguments);if(this.x>f.config.WIDTH-this.width){this.x=f.config.WIDTH-this.width}else{if(this.x<0){this.x=0}}if(this.y>f.config.HEIGHT-this.height){return this.y=f.config.HEIGHT-this.height}else{if(this.y<0){return this.y=0}}};return h})()}).call(this);